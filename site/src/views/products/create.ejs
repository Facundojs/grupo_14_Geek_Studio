<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head.ejs') %>
<body>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
    <%- include('../partials/header.ejs') %>
    <main> 
        <div class="create-prod">
            <!-- Aca voy a tener que poner un nuevo div que encierre tanto el div del input como el error, y así para cada campo (field) -->
            <div class="create-form">
                <h1 class="h1-create">Crear Producto</h1>
                
                <form action="/productos/crear"  method="POST" enctype="multipart/form-data">
                    
                        <div class="form-row">
                            <input type="text" value="<%= locals.oldData ? oldData.name : null %>" type="text" name="name" id="name" required>
                            <label class="lbl-name">
                                <span class="text-name">Nombre del Producto</span>
                            </label>
                        </div>
                            <% if (locals.errors && errors.name) { %>
                                <p class="feedback is-danger"><%= errors.name.msg %></p>
                            <% } %>
                
                        <div class="form-row">
                            <input value="<%= locals.oldData ? oldData.price : null %>" type="number" name="price" id="price" required>
                            <label class="lbl-name">
                                <span class="text-name">Precio</span>
                            </label>
                        </div>
                            <% if (locals.errors && errors.price) { %>
                                <p class="feedback is-danger"><%= errors.price.msg %></p>
                            <% } %>


                        <div class="form-row">
                            <input value="<%= locals.oldData ? oldData.discount : null %>" type="text" name="discount" id="discount" max="100" required>
                            <label class="lbl-name">
                                <span class="text-name">Descuento</span>
                            </label>
                        </div>

                        <div class="form-row">
                            <input value="<%= locals.oldData ? oldData.features : null %>" type="text-area" name="features" id="features" required>
                            <label class="lbl-name">
                                <span class="text-name">Características</span>
                            </label>
                        </div>
                            <% if (locals.errors && errors.features) { %>
                                <p class="feedback is-danger"><%= errors.features.msg %></p>
                            <% } %>

                            <div class="form-row">
                                <select name="category" id="category" placeholder="Categoría" >
                                    <option>Seleccione una categoría</option>   
                                    <% categories.forEach((category)=>{ %>
                                        <option value="<%= category.dataValues.id %>"><%= category.dataValues.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <% if (locals.errors && errors.category) { %>
                                <p class="feedback is-danger"><%= errors.category.msg %></p>
                            <% } %>

                        <div class="prod-img">
                            <label for="image"></label>
                            <input type="file" class="file" name="image" id="image" >
                        </div>


                        
                        <!-- SI AGREGAMOS CAMPOS AL CREATE PRODUCT -->

                        <!-- <div class="form-row">
                            <input type="text" value="" type="text" name="name" id="name" required>
                            <label class="lbl-name">
                                <span class="text-name">Marca</span>
                            </label>
                        </div>

                        <div class="form-row">
                            <input type="text" value="" type="text" name="name" id="name" required>
                            <label class="lbl-name">
                                <span class="text-name">Modelo</span>
                            </label>
                        </div>

                        <div class="form-row">
                            <input type="text" value="" type="text" name="name" id="name" required>
                            <label class="lbl-name">
                                <span class="text-name">Color</span>
                            </label>
                        </div>

                        <div class="form-row">
                            <input type="text" value="" type="text" name="name" id="name" required>
                            <label class="lbl-name">
                                <span class="text-name">Alguna otra cosa</span>
                            </label>
                        </div> -->

                        <div >
                            <input class="btn-create" type="submit" value="Crear">
                            <input class="btn-delete" type="reset" value="Resetear Formulario">
                        </div>
                       
                </form>
            
        </div>

        <script src="/js/validations.js"></script>
    </main>

    <%- include('../partials/footer.ejs') %> >
</body>
</html>